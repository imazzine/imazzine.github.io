<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="676px" preserveAspectRatio="none" style="width:572px;height:676px;" version="1.1" viewBox="0 0 572 676" width="572px" zoomAndPan="magnify"><defs><filter height="300%" id="fvqgaft89oich" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><text fill="#000000" font-family="sans-serif" font-size="18" lengthAdjust="spacingAndGlyphs" textLength="269" x="150.5" y="27.4023">Definition: Node#insertBefore()</text><ellipse cx="244.75" cy="41.1992" fill="#000000" filter="url(#fvqgaft89oich)" rx="10" ry="10" style="stroke: none; stroke-width: 1.0;"/><rect fill="#FFFFFF" filter="url(#fvqgaft89oich)" height="563.8955" style="stroke: #000000; stroke-width: 2.0;" width="551" x="10" y="61.6523"/><path d="M83,62.6523 L83,71.1406 L73,81.1406 L10,81.1406 " fill="none" style="stroke: #000000; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="63" x="13" y="76.1875">SyncTask</text><polygon fill="#FEFECE" filter="url(#fvqgaft89oich)" points="190.25,98.1406,309.25,98.1406,299.25,132.2734,180.25,132.2734" style="stroke: #A80036; stroke-width: 1.5;"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="109" x="190.25" y="119.7422">newNode, refNode</text><rect fill="#FEFECE" filter="url(#fvqgaft89oich)" height="34.1328" style="stroke: #A80036; stroke-width: 1.5;" width="306" x="91.75" y="152.2734"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="286" x="101.75" y="173.875">internal.nodesIndices.get(newNode).parent = this</text><rect fill="#FEFECE" filter="url(#fvqgaft89oich)" height="34.1328" style="stroke: #A80036; stroke-width: 1.5;" width="340" x="74.75" y="206.4063"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="320" x="84.75" y="228.0078">const children = internal.nodesIndices.get(this).children</text><rect fill="#FEFECE" filter="url(#fvqgaft89oich)" height="34.1328" style="stroke: #A80036; stroke-width: 1.5;" width="284" x="102.75" y="260.5391"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="264" x="112.75" y="282.1406">const newIndex = children.indexOf(newNode)</text><rect fill="#FEFECE" filter="url(#fvqgaft89oich)" height="34.1328" style="stroke: #A80036; stroke-width: 1.5;" width="182" x="153.75" y="363.1494"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="162" x="163.75" y="384.751">children.splice(newIndex, 1)</text><polygon fill="#FEFECE" filter="url(#fvqgaft89oich)" points="203.75,314.6719,285.75,314.6719,297.75,326.6719,285.75,338.6719,203.75,338.6719,191.75,326.6719,203.75,314.6719" style="stroke: #A80036; stroke-width: 1.5;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="18" x="248.75" y="349.3066">yes</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="82" x="203.75" y="330.8291">newIndex &gt;= 0</text><polygon fill="#FEFECE" filter="url(#fvqgaft89oich)" points="244.75,417.2822,256.75,429.2822,244.75,441.2822,232.75,429.2822,244.75,417.2822" style="stroke: #A80036; stroke-width: 1.5;"/><polygon fill="#FEFECE" filter="url(#fvqgaft89oich)" points="201.25,461.2822,288.25,461.2822,300.25,473.2822,288.25,485.2822,201.25,485.2822,189.25,473.2822,201.25,461.2822" style="stroke: #A80036; stroke-width: 1.5;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="87" x="201.25" y="477.4395">refNode == null</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="18" x="171.25" y="470.9619">yes</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="14" x="300.25" y="470.9619">no</text><rect fill="#FEFECE" filter="url(#fvqgaft89oich)" height="34.1328" style="stroke: #A80036; stroke-width: 1.5;" width="160" x="30" y="495.2822"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="140" x="40" y="516.8838">children.push(newNode)</text><rect fill="#FEFECE" filter="url(#fvqgaft89oich)" height="34.1328" style="stroke: #A80036; stroke-width: 1.5;" width="339" x="210" y="495.2822"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="319" x="220" y="516.8838">children.splice(children.indexOf(refNode), 0, newNode)</text><polygon fill="#FEFECE" filter="url(#fvqgaft89oich)" points="244.75,535.415,256.75,547.415,244.75,559.415,232.75,547.415,244.75,535.415" style="stroke: #A80036; stroke-width: 1.5;"/><polygon fill="#FEFECE" filter="url(#fvqgaft89oich)" points="217.75,579.415,281.75,579.415,271.75,613.5479,207.75,613.5479" style="stroke: #A80036; stroke-width: 1.5;"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="54" x="217.75" y="601.0166">newNode</text><ellipse cx="244.75" cy="655.5479" fill="#FFFFFF" filter="url(#fvqgaft89oich)" rx="10" ry="10" style="stroke: #000000; stroke-width: 1.5;"/><line style="stroke: #000000; stroke-width: 2.5;" x1="238.5628" x2="250.9372" y1="649.3607" y2="661.735"/><line style="stroke: #000000; stroke-width: 2.5;" x1="250.9372" x2="238.5628" y1="649.3607" y2="661.735"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="244.75" x2="244.75" y1="132.2734" y2="152.2734"/><polygon fill="#A80036" points="240.75,142.2734,244.75,152.2734,248.75,142.2734,244.75,146.2734" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="244.75" x2="244.75" y1="186.4063" y2="206.4063"/><polygon fill="#A80036" points="240.75,196.4063,244.75,206.4063,248.75,196.4063,244.75,200.4063" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="244.75" x2="244.75" y1="240.5391" y2="260.5391"/><polygon fill="#A80036" points="240.75,250.5391,244.75,260.5391,248.75,250.5391,244.75,254.5391" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="244.75" x2="244.75" y1="338.6719" y2="363.1494"/><polygon fill="#A80036" points="240.75,353.1494,244.75,363.1494,248.75,353.1494,244.75,357.1494" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="297.75" x2="345.75" y1="326.6719" y2="326.6719"/><polygon fill="#A80036" points="341.75,370.2158,345.75,380.2158,349.75,370.2158,345.75,374.2158" style="stroke: #A80036; stroke-width: 1.5;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="345.75" x2="345.75" y1="326.6719" y2="429.2822"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="345.75" x2="256.75" y1="429.2822" y2="429.2822"/><polygon fill="#A80036" points="266.75,425.2822,256.75,429.2822,266.75,433.2822,262.75,429.2822" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="244.75" x2="244.75" y1="397.2822" y2="417.2822"/><polygon fill="#A80036" points="240.75,407.2822,244.75,417.2822,248.75,407.2822,244.75,411.2822" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="244.75" x2="244.75" y1="294.6719" y2="314.6719"/><polygon fill="#A80036" points="240.75,304.6719,244.75,314.6719,248.75,304.6719,244.75,308.6719" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="189.25" x2="110" y1="473.2822" y2="473.2822"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="110" x2="110" y1="473.2822" y2="495.2822"/><polygon fill="#A80036" points="106,485.2822,110,495.2822,114,485.2822,110,489.2822" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="300.25" x2="379.5" y1="473.2822" y2="473.2822"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="379.5" x2="379.5" y1="473.2822" y2="495.2822"/><polygon fill="#A80036" points="375.5,485.2822,379.5,495.2822,383.5,485.2822,379.5,489.2822" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="110" x2="110" y1="529.415" y2="547.415"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="110" x2="232.75" y1="547.415" y2="547.415"/><polygon fill="#A80036" points="222.75,543.415,232.75,547.415,222.75,551.415,226.75,547.415" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="379.5" x2="379.5" y1="529.415" y2="547.415"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="379.5" x2="256.75" y1="547.415" y2="547.415"/><polygon fill="#A80036" points="266.75,543.415,256.75,547.415,266.75,551.415,262.75,547.415" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="244.75" x2="244.75" y1="441.2822" y2="461.2822"/><polygon fill="#A80036" points="240.75,451.2822,244.75,461.2822,248.75,451.2822,244.75,455.2822" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="244.75" x2="244.75" y1="559.415" y2="579.415"/><polygon fill="#A80036" points="240.75,569.415,244.75,579.415,248.75,569.415,244.75,573.415" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="244.75" x2="244.75" y1="51.1992" y2="98.1406"/><polygon fill="#A80036" points="240.75,88.1406,244.75,98.1406,248.75,88.1406,244.75,92.1406" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="244.75" x2="244.75" y1="613.5479" y2="645.5479"/><polygon fill="#A80036" points="240.75,635.5479,244.75,645.5479,248.75,635.5479,244.75,639.5479" style="stroke: #A80036; stroke-width: 1.0;"/><!--
@startuml Definition_Node.insertBefore
    title Definition: Node#insertBefore()

    start
        partition SyncTask {
            :newNode, refNode/
            :internal.nodesIndices.get(newNode).parent = this]
            :const children = internal.nodesIndices.get(this).children]
            :const newIndex = children.indexOf(newNode)]
            if (newIndex >= 0) then (yes)
                :children.splice(newIndex, 1)]
            endif
            if (refNode == null) then (yes)
                :children.push(newNode)]
            else (no)
                :children.splice(children.indexOf(refNode), 0, newNode)]
            endif
            :newNode/
        }
    end
@enduml

PlantUML version 1.2019.09(Mon Aug 26 19:19:51 EEST 2019)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Java Version: 13.0.1+9
Operating System: Mac OS X
OS Version: 10.15.3
Default Encoding: UTF-8
Language: en
Country: UA
--></g></svg>