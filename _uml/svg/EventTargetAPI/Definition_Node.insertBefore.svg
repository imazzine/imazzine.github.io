<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="680px" preserveAspectRatio="none" style="width:607px;height:680px;" version="1.1" viewBox="0 0 607 680" width="607px" zoomAndPan="magnify"><defs><filter height="300%" id="fvqgaft89oich" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><text fill="#000000" font-family="sans-serif" font-size="18" lengthAdjust="spacing" textLength="283" x="161" y="26.708">Definition: Node#insertBefore()</text><ellipse cx="253.25" cy="40.9531" fill="#000000" filter="url(#fvqgaft89oich)" rx="10" ry="10" style="stroke:none;stroke-width:1.0;"/><rect fill="#FFFFFF" filter="url(#fvqgaft89oich)" height="562.4805" style="stroke:#000000;stroke-width:2.0;" width="579" x="11" y="60.9531"/><path d="M87,60.9531 L87,70.25 L77,80.25 L11,80.25 " fill="none" style="stroke:#000000;stroke-width:2.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="66" x="14" y="74.9482">SyncTask</text><polygon fill="#FEFECE" filter="url(#fvqgaft89oich)" points="195.25,97.25,321.25,97.25,311.25,131.2188,185.25,131.2188" style="stroke:#A80036;stroke-width:1.5;"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="116" x="195.25" y="118.3887">newNode, refNode</text><rect fill="#FEFECE" filter="url(#fvqgaft89oich)" height="33.9688" style="stroke:#A80036;stroke-width:1.5;" width="335" x="85.75" y="151.2188"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="315" x="95.75" y="172.3574">internal.nodesIndices.get(newNode).parent = this</text><rect fill="#FEFECE" filter="url(#fvqgaft89oich)" height="33.9688" style="stroke:#A80036;stroke-width:1.5;" width="374" x="66.25" y="205.1875"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="354" x="76.25" y="226.3262">const children = internal.nodesIndices.get(this).children</text><rect fill="#FEFECE" filter="url(#fvqgaft89oich)" height="33.9688" style="stroke:#A80036;stroke-width:1.5;" width="303" x="101.75" y="259.1563"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="283" x="111.75" y="280.2949">const newIndex = children.indexOf(newNode)</text><rect fill="#FEFECE" filter="url(#fvqgaft89oich)" height="33.9688" style="stroke:#A80036;stroke-width:1.5;" width="194" x="156.25" y="361.5273"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="174" x="166.25" y="382.666">children.splice(newIndex, 1)</text><polygon fill="#FEFECE" filter="url(#fvqgaft89oich)" points="210.25,313.125,296.25,313.125,308.25,325.125,296.25,337.125,210.25,337.125,198.25,325.125,210.25,313.125" style="stroke:#A80036;stroke-width:1.5;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="20" x="257.25" y="347.3354">yes</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="86" x="210.25" y="328.9331">newIndex &gt;= 0</text><polygon fill="#FEFECE" filter="url(#fvqgaft89oich)" points="253.25,415.4961,265.25,427.4961,253.25,439.4961,241.25,427.4961,253.25,415.4961" style="stroke:#A80036;stroke-width:1.5;"/><polygon fill="#FEFECE" filter="url(#fvqgaft89oich)" points="207.75,459.4961,298.75,459.4961,310.75,471.4961,298.75,483.4961,207.75,483.4961,195.75,471.4961,207.75,459.4961" style="stroke:#A80036;stroke-width:1.5;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="91" x="207.75" y="475.3042">refNode == null</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="20" x="175.75" y="468.9019">yes</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="14" x="310.75" y="468.9019">no</text><rect fill="#FEFECE" filter="url(#fvqgaft89oich)" height="33.9688" style="stroke:#A80036;stroke-width:1.5;" width="173" x="23" y="493.4961"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="153" x="33" y="514.6348">children.push(newNode)</text><rect fill="#FEFECE" filter="url(#fvqgaft89oich)" height="33.9688" style="stroke:#A80036;stroke-width:1.5;" width="362" x="216" y="493.4961"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="342" x="226" y="514.6348">children.splice(children.indexOf(refNode), 0, newNode)</text><polygon fill="#FEFECE" filter="url(#fvqgaft89oich)" points="253.25,533.4648,265.25,545.4648,253.25,557.4648,241.25,545.4648,253.25,533.4648" style="stroke:#A80036;stroke-width:1.5;"/><polygon fill="#FEFECE" filter="url(#fvqgaft89oich)" points="224.25,577.4648,292.25,577.4648,282.25,611.4336,214.25,611.4336" style="stroke:#A80036;stroke-width:1.5;"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="58" x="224.25" y="598.6035">newNode</text><ellipse cx="253.25" cy="653.4336" fill="#FFFFFF" filter="url(#fvqgaft89oich)" rx="10" ry="10" style="stroke:#000000;stroke-width:1.5;"/><line style="stroke:#000000;stroke-width:2.5;" x1="247.0628" x2="259.4372" y1="647.2464" y2="659.6208"/><line style="stroke:#000000;stroke-width:2.5;" x1="259.4372" x2="247.0628" y1="647.2464" y2="659.6208"/><line style="stroke:#A80036;stroke-width:1.5;" x1="253.25" x2="253.25" y1="131.2188" y2="151.2188"/><polygon fill="#A80036" points="249.25,141.2188,253.25,151.2188,257.25,141.2188,253.25,145.2188" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.5;" x1="253.25" x2="253.25" y1="185.1875" y2="205.1875"/><polygon fill="#A80036" points="249.25,195.1875,253.25,205.1875,257.25,195.1875,253.25,199.1875" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.5;" x1="253.25" x2="253.25" y1="239.1563" y2="259.1563"/><polygon fill="#A80036" points="249.25,249.1563,253.25,259.1563,257.25,249.1563,253.25,253.1563" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.5;" x1="253.25" x2="253.25" y1="337.125" y2="361.5273"/><polygon fill="#A80036" points="249.25,351.5273,253.25,361.5273,257.25,351.5273,253.25,355.5273" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.5;" x1="308.25" x2="360.25" y1="325.125" y2="325.125"/><polygon fill="#A80036" points="356.25,368.5117,360.25,378.5117,364.25,368.5117,360.25,372.5117" style="stroke:#A80036;stroke-width:1.5;"/><line style="stroke:#A80036;stroke-width:1.5;" x1="360.25" x2="360.25" y1="325.125" y2="427.4961"/><line style="stroke:#A80036;stroke-width:1.5;" x1="360.25" x2="265.25" y1="427.4961" y2="427.4961"/><polygon fill="#A80036" points="275.25,423.4961,265.25,427.4961,275.25,431.4961,271.25,427.4961" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.5;" x1="253.25" x2="253.25" y1="395.4961" y2="415.4961"/><polygon fill="#A80036" points="249.25,405.4961,253.25,415.4961,257.25,405.4961,253.25,409.4961" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.5;" x1="253.25" x2="253.25" y1="293.125" y2="313.125"/><polygon fill="#A80036" points="249.25,303.125,253.25,313.125,257.25,303.125,253.25,307.125" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.5;" x1="195.75" x2="109.5" y1="471.4961" y2="471.4961"/><line style="stroke:#A80036;stroke-width:1.5;" x1="109.5" x2="109.5" y1="471.4961" y2="493.4961"/><polygon fill="#A80036" points="105.5,483.4961,109.5,493.4961,113.5,483.4961,109.5,487.4961" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.5;" x1="310.75" x2="397" y1="471.4961" y2="471.4961"/><line style="stroke:#A80036;stroke-width:1.5;" x1="397" x2="397" y1="471.4961" y2="493.4961"/><polygon fill="#A80036" points="393,483.4961,397,493.4961,401,483.4961,397,487.4961" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.5;" x1="109.5" x2="109.5" y1="527.4648" y2="545.4648"/><line style="stroke:#A80036;stroke-width:1.5;" x1="109.5" x2="241.25" y1="545.4648" y2="545.4648"/><polygon fill="#A80036" points="231.25,541.4648,241.25,545.4648,231.25,549.4648,235.25,545.4648" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.5;" x1="397" x2="397" y1="527.4648" y2="545.4648"/><line style="stroke:#A80036;stroke-width:1.5;" x1="397" x2="265.25" y1="545.4648" y2="545.4648"/><polygon fill="#A80036" points="275.25,541.4648,265.25,545.4648,275.25,549.4648,271.25,545.4648" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.5;" x1="253.25" x2="253.25" y1="439.4961" y2="459.4961"/><polygon fill="#A80036" points="249.25,449.4961,253.25,459.4961,257.25,449.4961,253.25,453.4961" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.5;" x1="253.25" x2="253.25" y1="557.4648" y2="577.4648"/><polygon fill="#A80036" points="249.25,567.4648,253.25,577.4648,257.25,567.4648,253.25,571.4648" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.5;" x1="253.25" x2="253.25" y1="50.9531" y2="97.25"/><polygon fill="#A80036" points="249.25,87.25,253.25,97.25,257.25,87.25,253.25,91.25" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.5;" x1="253.25" x2="253.25" y1="611.4336" y2="643.4336"/><polygon fill="#A80036" points="249.25,633.4336,253.25,643.4336,257.25,633.4336,253.25,637.4336" style="stroke:#A80036;stroke-width:1.0;"/><!--MD5=[f45364821e392ba5463f7a889dc66b8c]
@startuml Definition_Node.insertBefore
    title Definition: Node#insertBefore()

    start
        partition SyncTask {
            :newNode, refNode/
            :internal.nodesIndices.get(newNode).parent = this]
            :const children = internal.nodesIndices.get(this).children]
            :const newIndex = children.indexOf(newNode)]
            if (newIndex >= 0) then (yes)
                :children.splice(newIndex, 1)]
            endif
            if (refNode == null) then (yes)
                :children.push(newNode)]
            else (no)
                :children.splice(children.indexOf(refNode), 0, newNode)]
            endif
            :newNode/
        }
    end
@enduml

PlantUML version 1.2021.00(Sun Jan 10 12:25:05 EET 2021)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Default Encoding: UTF-8
Language: en
Country: US
--></g></svg>